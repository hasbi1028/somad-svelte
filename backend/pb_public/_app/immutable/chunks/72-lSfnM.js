import"./Bg9kRutz.js";import"./69_IOA4Y.js";import{p as _e,am as pe,an as fe,t as x,c as a,w as l,aj as I,a as ge,ak as we,s,u as N,al as ke,r as e,ao as Ae,n as W,d as Te}from"./BkCx6XBQ.js";import{h as Ke,s as n}from"./D7hMwOnl.js";import{e as V,i as Se}from"./DMASutV1.js";import{h as Le}from"./D1WGrigX.js";import{t as M,f as X,a as R}from"./CkRD9fqL.js";import{b as Ee}from"./B_0iTO2t.js";import{i as $e}from"./fqoh2bZT.js";import{s as xe,a as Ie}from"./W5e-gLA8.js";import{Q as Ne}from"./BsaTq-Vt.js";import{p as g}from"./DHkEQnsw.js";var Re=M("<option> </option>"),Me=M('<div class="card-pair svelte-1hb5lyo"><div class="id-card id-card-front rounded-lg svelte-1hb5lyo"><div class="header svelte-1hb5lyo"><div class="school-logo svelte-1hb5lyo"><img src="/favicon.png" alt="Logo MTs" class="svelte-1hb5lyo"></div> <div class="school-name svelte-1hb5lyo">MTs NEGERI 2 KOLAKA UTARA</div> <div class="school-address svelte-1hb5lyo">Jl. Lalume No. 42, Kel. Olo - Oloho, Kec. Pakue, Kab. Kolaka Utara, Sulawesi Tenggara</div></div> <div class="card-body svelte-1hb5lyo"><div class="photo-container svelte-1hb5lyo"><img src="https://placehold.co/120x150" alt="Foto Siswa" class="svelte-1hb5lyo"></div> <div class="student-info svelte-1hb5lyo"><div class="info-row svelte-1hb5lyo"><div class="info-label svelte-1hb5lyo">NISM:</div> <div class="info-value svelte-1hb5lyo"> </div></div> <div class="info-row svelte-1hb5lyo"><div class="info-label svelte-1hb5lyo">NISN:</div> <div class="info-value svelte-1hb5lyo"> </div></div> <div class="info-row svelte-1hb5lyo"><div class="info-label svelte-1hb5lyo">Nama:</div> <div class="info-value svelte-1hb5lyo"> </div></div> <div class="info-row svelte-1hb5lyo"><div class="info-label svelte-1hb5lyo">Kelas:</div> <div class="info-value svelte-1hb5lyo"> </div></div> <div class="info-row svelte-1hb5lyo"><div class="info-label svelte-1hb5lyo">TTL:</div> <div class="info-value svelte-1hb5lyo"> </div></div> <div class="info-row svelte-1hb5lyo"><div class="info-label svelte-1hb5lyo">Alamat:</div> <div class="info-value svelte-1hb5lyo"> </div></div> <div class="info-row svelte-1hb5lyo"><div class="info-label svelte-1hb5lyo">Gol.Darah:</div> <div class="info-value svelte-1hb5lyo"> </div></div> <div class="info-row svelte-1hb5lyo"><div class="info-label svelte-1hb5lyo">Posisi:</div> <div class="info-value svelte-1hb5lyo"> </div></div></div> <div class="valid-period svelte-1hb5lyo"> </div></div> <div class="watermark svelte-1hb5lyo">MTs NEGERI 2 KOLAKA UTARA</div></div> <div class="id-card id-card-back svelte-1hb5lyo"><div class="back-header svelte-1hb5lyo"><div class="back-title svelte-1hb5lyo">KARTU PELAJAR</div> <div class="back-subtitle svelte-1hb5lyo">MTs NEGERI 2 KOLAKA UTARA</div></div> <div class="rules-container svelte-1hb5lyo"><div class="rules-title svelte-1hb5lyo">TATA TERTIB SISWA</div> <ol class="rules-list svelte-1hb5lyo"><li class="svelte-1hb5lyo">Siswa wajib menjaga nama baik madrasah.</li> <li class="svelte-1hb5lyo">Siswa wajib memakai seragam sesuai ketentuan.</li> <li class="svelte-1hb5lyo">Siswa wajib hadir tepat waktu.</li> <li class="svelte-1hb5lyo">Dilarang membawa HP ke madrasah.</li> <li class="svelte-1hb5lyo">Dilarang merokok dan membawa benda tajam.</li> <li class="svelte-1hb5lyo">Siswa wajib menjaga kebersihan lingkungan.</li> <li class="svelte-1hb5lyo">Kartu ini wajib dibawa setiap hari.</li> <li class="svelte-1hb5lyo">Jika kartu hilang, segera laporkan ke TU.</li></ol></div> <div class="qr-container svelte-1hb5lyo"><div class="qr-title svelte-1hb5lyo">Scan untuk verifikasi identitas</div> <div class="qr-code svelte-1hb5lyo"><!></div></div> <div class="signature-container svelte-1hb5lyo"><div class="signature-line svelte-1hb5lyo"></div> <div class="signature-name svelte-1hb5lyo">Anwar, S.Pd, M.Pd</div> <div class="signature-title svelte-1hb5lyo">Kepala Madrasah</div></div> <div class="watermark svelte-1hb5lyo">MTs NEGERI 2 KOLAKA UTARA</div></div></div>'),je=M('<main><h1 class="svelte-1hb5lyo">ID Card Generator MTs Negeri 2 Kolaka Utara</h1> <div class="controls svelte-1hb5lyo"><button class="svelte-1hb5lyo">Ambil Semua Kartu</button> <label for="classSelect">Pilih Kelas:</label> <select id="classSelect" class="svelte-1hb5lyo"><option>Semua</option><!></select> <button class="svelte-1hb5lyo">Cetak Kartu</button></div> <div class="card-container svelte-1hb5lyo"></div></main>');function ze(Z,ee){_e(ee,!1);const[ae,se]=xe(),j=()=>Ie(C,"$cards",ae),D=I();let C=Ae([]),w=I([]),b=I("all");function le(o){try{const i=`ID:${o.user_id},BERLAKU SAMPAI:${o.validThru}`,r=Ne(4,"L");return r.addData(i),r.make(),r.createSvgTag({cellSize:4,margin:1})}catch(i){return console.error("Error generating QR code:",i),""}}async function ie(){try{const[o,i,v,c]=await Promise.all([g.collection("students").getFullList(),g.collection("users").getFullList(),g.collection("classes").getFullList(),g.collection("positions").getFullList()]);N(w,v);const r=Object.fromEntries(i.map(t=>[t.id,t])),h=Object.fromEntries(v.map(t=>[t.id,t])),u=Object.fromEntries(c.map(t=>[t.id,t])),_=o.map(t=>{const d=r[t.user_id]||{},p=h[t.class_id]||{},K=d.position_id?u[d.position_id]||{}:{},y=t.entry_year?`${t.entry_year}/${Number(t.entry_year)+1}`:"2024/2025",f=t.entry_year?`31 Juli ${Number(t.entry_year)+1}`:"31 Juli 2025";return{id:t.id,nism:t.nism||"",nisn:t.nisn||"",user_id:t.user_id,name:d.full_name||"",class:p.name||"",address:d.address||"",dob:d.birth_date||"",bloodType:d.blood_type||"",academicYear:y,validThru:f,position:K.name||""}});C.set(_)}catch(o){console.error("Error fetching cards:",o)}}function te(){window.print()}pe(()=>(j(),l(b)),()=>{N(D,j().filter(o=>l(b)==="all"||o.class===l(b)))}),fe(),$e();var k=je();Ke(o=>{we.title="ID Card Generator MTs Negeri 2 Kolaka Utara"});var A=s(a(k),2),P=a(A),m=s(P,4);x(()=>{l(b),ke(()=>{l(w)})});var T=a(m);T.value=(T.__value="all")==null?"":"all";var oe=s(T);V(oe,1,()=>l(w),Se,(o,i)=>{var v=Re(),c={},r=a(v,!0);e(v),x(()=>{c!==(c=l(i).name)&&(v.value=(v.__value=l(i).name)==null?"":l(i).name),n(r,l(i).name)}),R(o,v)}),e(m);var ve=s(m,2);e(A);var U=s(A,2);V(U,5,()=>l(D),o=>o.id,(o,i)=>{var v=Me(),c=a(v),r=s(a(c),2),h=s(a(r),2),u=a(h),_=s(a(u),2),t=a(_,!0);e(_),e(u);var d=s(u,2),p=s(a(d),2),K=a(p,!0);e(p),e(d);var y=s(d,2),f=s(a(y),2),re=a(f,!0);e(f),e(y);var S=s(y,2),O=s(a(S),2),de=a(O,!0);e(O),e(S);var L=s(S,2),G=s(a(L),2),ne=a(G,!0);e(G),e(L);var E=s(L,2),q=s(a(E),2),ce=a(q,!0);e(q),e(E);var $=s(E,2),F=s(a($),2),be=a(F,!0);e(F),e($);var J=s($,2),Q=s(a(J),2),he=a(Q,!0);e(Q),e(J),e(h);var B=s(h,2),ue=a(B);e(B),e(r),W(2),e(c);var Y=s(c,2),z=s(a(Y),4),H=s(a(z),2),ye=a(H);Le(ye,()=>le(l(i))),e(H),e(z),W(4),e(Y),e(v),x(me=>{n(t,l(i).nism),n(K,l(i).nisn),n(re,l(i).name),n(de,l(i).class),n(ne,me),n(ce,l(i).address),n(be,l(i).bloodType),n(he,l(i).position),n(ue,`Tahun Pelajaran ${l(i).academicYear??""} - Berlaku s/d ${l(i).validThru??""}`)},[()=>new Date(l(i).dob).toLocaleString("id-ID",{day:"numeric",month:"long",year:"numeric"})],Te),R(o,v)}),e(U),e(k),X("click",P,ie),Ee(m,()=>l(b),o=>N(b,o)),X("click",ve,te),R(Z,k),ge(),se()}export{ze as I};
