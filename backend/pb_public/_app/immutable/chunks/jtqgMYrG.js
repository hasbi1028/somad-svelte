var W=Object.defineProperty;var H=r=>{throw TypeError(r)};var X=(r,t,e)=>t in r?W(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var S=(r,t,e)=>X(r,typeof t!="symbol"?t+"":t,e),Y=(r,t,e)=>t.has(r)||H("Cannot "+e);var I=(r,t,e)=>(Y(r,t,"read from private field"),e?e.call(r):t.get(r)),k=(r,t,e)=>t.has(r)?H("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e);import"./Bg9kRutz.js";import{x as w,w as m,a6 as Z,A as $,p as b,f as _,a as P,c as J,y as N,r as Q,t as L}from"./BkCx6XBQ.js";import{c as y,a as h,t as F,x as tt}from"./CkRD9fqL.js";import{c as V}from"./D__qNMiv.js";import{p as d,r as T,s as B}from"./Cb_y5l8Q.js";import{a as j}from"./BJPBFErB.js";import{i as q}from"./BujD1wMw.js";import{s as x}from"./BEjr47fl.js";import{a as z}from"./BQrLuGg-.js";import{a as E,u as G,b as A,m as K}from"./CIx-7lj2.js";import{C as rt}from"./DWlIzlWr.js";const et="data-avatar-root",at="data-avatar-image",st="data-avatar-fallback";var O;class ot{constructor(t){S(this,"opts");k(this,O,w(()=>({id:this.opts.id.current,[et]:"","data-status":this.opts.loadingStatus.current})));this.opts=t,this.loadImage=this.loadImage.bind(this),E(t)}loadImage(t,e,o){let n;const i=new Image;return i.src=t,e!==void 0&&(i.crossOrigin=e),o&&(i.referrerPolicy=o),this.opts.loadingStatus.current="loading",i.onload=()=>{n=window.setTimeout(()=>{this.opts.loadingStatus.current="loaded"},this.opts.delayMs.current)},i.onerror=()=>{this.opts.loadingStatus.current="error"},()=>{window.clearTimeout(n)}}get props(){return m(I(this,O))}}O=new WeakMap;var C;class it{constructor(t,e){S(this,"opts");S(this,"root");k(this,C,w(()=>({id:this.opts.id.current,style:{display:this.root.opts.loadingStatus.current==="loaded"?"block":"none"},"data-status":this.root.opts.loadingStatus.current,[at]:"",src:this.opts.src.current,crossorigin:this.opts.crossOrigin.current,referrerpolicy:this.opts.referrerPolicy.current})));this.opts=t,this.root=e,E(t),Z(()=>{if(!this.opts.src.current){this.root.opts.loadingStatus.current="error";return}this.opts.crossOrigin.current,$(()=>this.root.loadImage(this.opts.src.current??"",this.opts.crossOrigin.current,this.opts.referrerPolicy.current))})}get props(){return m(I(this,C))}}C=new WeakMap;var M;class nt{constructor(t,e){S(this,"opts");S(this,"root");k(this,M,w(()=>({style:{display:this.root.opts.loadingStatus.current==="loaded"?"none":void 0},"data-status":this.root.opts.loadingStatus.current,[st]:""})));this.opts=t,this.root=e,E(t)}get props(){return m(I(this,M))}}M=new WeakMap;const D=new rt("Avatar.Root");function lt(r){return D.set(new ot(r))}function ct(r){return new it(r,D.get())}function dt(r){return new nt(r,D.get())}var ut=F("<div><!></div>");function ft(r,t){b(t,!0);let e=d(t,"delayMs",3,0),o=d(t,"loadingStatus",15,"loading"),n=d(t,"id",19,G),i=d(t,"ref",15,null),u=T(t,["$$slots","$$events","$$legacy","delayMs","loadingStatus","onLoadingStatusChange","child","children","id","ref"]);const f=lt({delayMs:A.with(()=>e()),loadingStatus:A.with(()=>o(),a=>{var s;o()!==a&&(o(a),(s=t.onLoadingStatusChange)==null||s.call(t,a))}),id:A.with(()=>n()),ref:A.with(()=>i(),a=>i(a))}),l=w(()=>K(u,f.props));var c=y(),R=_(c);{var g=a=>{var s=y(),p=_(s);x(p,()=>t.child,()=>({props:m(l)})),h(a,s)},v=a=>{var s=ut();let p;var U=J(s);x(U,()=>t.children??N),Q(s),L(()=>p=z(s,p,{...m(l)})),h(a,s)};q(R,a=>{t.child?a(g):a(v,!1)})}h(r,c),P()}var gt=F("<img>");function ht(r,t){b(t,!0);let e=d(t,"id",19,G),o=d(t,"ref",15,null),n=d(t,"crossorigin",3,void 0),i=d(t,"referrerpolicy",3,void 0),u=T(t,["$$slots","$$events","$$legacy","src","child","id","ref","crossorigin","referrerpolicy"]);const f=ct({src:A.with(()=>t.src),id:A.with(()=>e()),ref:A.with(()=>o(),a=>o(a)),crossOrigin:A.with(()=>n()),referrerPolicy:A.with(()=>i())}),l=w(()=>K(u,f.props));var c=y(),R=_(c);{var g=a=>{var s=y(),p=_(s);x(p,()=>t.child,()=>({props:m(l)})),h(a,s)},v=a=>{var s=gt();let p;L(()=>p=z(s,p,{...m(l),src:t.src})),tt(s),h(a,s)};q(R,a=>{t.child?a(g):a(v,!1)})}h(r,c),P()}var mt=F("<span><!></span>");function vt(r,t){b(t,!0);let e=d(t,"id",19,G),o=d(t,"ref",15,null),n=T(t,["$$slots","$$events","$$legacy","children","child","id","ref"]);const i=dt({id:A.with(()=>e()),ref:A.with(()=>o(),g=>o(g))}),u=w(()=>K(n,i.props));var f=y(),l=_(f);{var c=g=>{var v=y(),a=_(v);x(a,()=>t.child,()=>({props:m(u)})),h(g,v)},R=g=>{var v=mt();let a;var s=J(v);x(s,()=>t.children??N),Q(v),L(()=>a=z(v,a,{...m(u)})),h(g,v)};q(l,g=>{t.child?g(c):g(R,!1)})}h(r,f),P()}function kt(r,t){b(t,!0);let e=d(t,"ref",15,null),o=T(t,["$$slots","$$events","$$legacy","ref","class"]);var n=y(),i=_(n);const u=w(()=>j("relative flex size-10 shrink-0 overflow-hidden rounded-full",t.class));V(i,()=>ft,(f,l)=>{l(f,B({get class(){return m(u)}},()=>o,{get ref(){return e()},set ref(c){e(c)}}))}),h(r,n),P()}function Ot(r,t){b(t,!0);let e=d(t,"ref",15,null),o=T(t,["$$slots","$$events","$$legacy","ref","class"]);var n=y(),i=_(n);const u=w(()=>j("aspect-square h-full w-full",t.class));V(i,()=>ht,(f,l)=>{l(f,B({get class(){return m(u)}},()=>o,{get ref(){return e()},set ref(c){e(c)}}))}),h(r,n),P()}function Ct(r,t){b(t,!0);let e=d(t,"ref",15,null),o=T(t,["$$slots","$$events","$$legacy","ref","class"]);var n=y(),i=_(n);const u=w(()=>j("bg-muted flex h-full w-full items-center justify-center rounded-full",t.class));V(i,()=>vt,(f,l)=>{l(f,B({get class(){return m(u)}},()=>o,{get ref(){return e()},set ref(c){e(c)}}))}),h(r,n),P()}export{kt as A,Ot as a,Ct as b};
