import"../chunks/Bg9kRutz.js";import"../chunks/69_IOA4Y.js";import{p as Xe,a2 as Ze,t as d,c as s,s as a,w as e,aj as r,a as et,u as l,r as u,al as ye,n as tt}from"../chunks/BkCx6XBQ.js";import{s as q}from"../chunks/D7hMwOnl.js";import{i as Ae}from"../chunks/BujD1wMw.js";import{e as Ke,i as Te}from"../chunks/DMASutV1.js";import{t as S,f as at,a as b,b as lt,r as st}from"../chunks/CkRD9fqL.js";import{r as v}from"../chunks/BQrLuGg-.js";import{b as p}from"../chunks/DPnNjdDr.js";import{b as fe}from"../chunks/B_0iTO2t.js";import{i as ut}from"../chunks/fqoh2bZT.js";import{o as rt}from"../chunks/HM23sfSb.js";import{p as m}from"../chunks/DHkEQnsw.js";import{s as it,g as nt}from"../chunks/DxocaHFr.js";import{B as ot}from"../chunks/BJPBFErB.js";const pt=()=>{const c=it;return{page:{subscribe:c.page.subscribe},navigating:{subscribe:c.navigating.subscribe},updated:c.updated}},vt={subscribe(c){return pt().page.subscribe(c)}};var _t=S("<option> </option>"),dt=S("<option> </option>"),ct=S('<p class="error svelte-1ygu2uu"> </p>'),bt=S('<p class="success svelte-1ygu2uu"> </p>'),mt=S('<form class="svelte-1ygu2uu"><h1>Edit Student</h1> <fieldset class="svelte-1ygu2uu"><legend>User Information</legend> <label class="svelte-1ygu2uu">Email: <input type="email" required class="svelte-1ygu2uu"></label> <label class="svelte-1ygu2uu">Full Name: <input type="text" required class="svelte-1ygu2uu"></label> <label class="svelte-1ygu2uu">NIK: <input type="text" required class="svelte-1ygu2uu"></label> <label class="svelte-1ygu2uu">Birth Date: <input type="date" required class="svelte-1ygu2uu"></label> <label class="svelte-1ygu2uu">Birth Place: <input type="text" required class="svelte-1ygu2uu"></label> <label class="svelte-1ygu2uu">Gender: <select required class="svelte-1ygu2uu"><option>Select Gender</option><option>Male</option><option>Female</option></select></label> <label class="svelte-1ygu2uu">Phone Number: <input type="text" class="svelte-1ygu2uu"></label> <label class="svelte-1ygu2uu">Address: <textarea class="svelte-1ygu2uu"></textarea></label> <label class="svelte-1ygu2uu">Father Name: <input type="text" class="svelte-1ygu2uu"></label> <label class="svelte-1ygu2uu">Mother Name: <input type="text" class="svelte-1ygu2uu"></label> <label class="svelte-1ygu2uu">Parent Phone: <input type="text" class="svelte-1ygu2uu"></label> <label class="svelte-1ygu2uu">Blood Type: <input type="text" class="svelte-1ygu2uu"></label> <label class="svelte-1ygu2uu">Role: <input type="text" required class="svelte-1ygu2uu"></label> <label class="svelte-1ygu2uu">Position: <select required class="svelte-1ygu2uu"><option>Select Position</option><!></select></label></fieldset> <fieldset class="svelte-1ygu2uu"><legend>Student Information</legend> <label class="svelte-1ygu2uu">NISM: <input type="text" required class="svelte-1ygu2uu"></label> <label class="svelte-1ygu2uu">NISN: <input type="text" required class="svelte-1ygu2uu"></label> <label class="svelte-1ygu2uu">Class: <select required class="svelte-1ygu2uu"><option>Select Class</option><!></select></label> <label class="svelte-1ygu2uu">Status: <input type="text" required class="svelte-1ygu2uu"></label> <label class="svelte-1ygu2uu">Entry Year: <input type="number" required class="svelte-1ygu2uu"></label></fieldset> <!> <!> <!></form>');function kt(c,he){Xe(he,!1);let Ye=Ze(vt).params.id,o={},_={},N=r(""),P=r(""),w=r(""),I=r(""),M=r(""),g=r(""),$=r(""),B=r(""),F=r(""),k=r(""),D=r(""),E=r(""),U=r(""),y=r(""),C=r(""),G=r(""),f=r(""),R=r(""),L=r(""),K=r([]),T=r([]),h=r(""),O=r(""),j=r(!1);rt(async()=>{try{l(K,await m.collection("classes").getFullList()),l(T,await m.collection("positions").getFullList()),_=await m.collection("students").getOne(Ye),o=await m.collection("users").getOne(_.user_id),l(N,o.email),l(P,o.full_name),l(w,o.nik),l(I,o.birth_date),l(M,o.birth_place),l(g,o.gender),l($,o.phone_number),l(B,o.address),l(F,o.father_name),l(k,o.mother_name),l(D,o.parent_phone),l(E,o.blood_type),l(U,o.role),l(y,o.position_id),l(C,_.nism),l(G,_.nisn),l(f,_.class_id),l(R,_.status),l(L,_.entry_year)}catch(t){l(h,"Gagal mengambil data: "+t.message)}});async function ze(t){t.preventDefault(),l(j,!0),l(h,""),l(O,"");try{const i={email:e(N),full_name:e(P),nik:e(w),birth_date:e(I),birth_place:e(M),gender:e(g),phone_number:e($),address:e(B),father_name:e(F),mother_name:e(k),parent_phone:e(D),blood_type:e(E),role:e(U),position_id:e(y)};await m.collection("users").update(o.id,i);const n={nism:e(C),nisn:e(G),status:e(R),entry_year:e(L),class_id:e(f),user_id:o.id};await m.collection("students").update(_.id,n),l(O,"Student berhasil diupdate!"),nt("/students")}catch(i){l(h,"Error: "+i.message)}finally{l(j,!1)}}ut();var A=mt(),Y=a(s(A),2),z=a(s(Y),2),xe=a(s(z));v(xe),u(z);var H=a(z,2),qe=a(s(H));v(qe),u(H);var J=a(H,2),Se=a(s(J));v(Se),u(J);var Q=a(J,2),Ne=a(s(Q));v(Ne),u(Q);var V=a(Q,2),Pe=a(s(V));v(Pe),u(V);var W=a(V,2),X=a(s(W));d(()=>{e(g),ye(()=>{})});var Z=s(X);Z.value=((Z.__value="")==null,"");var ee=a(Z);ee.value=(ee.__value="male")==null?"":"male";var we=a(ee);we.value=(we.__value="female")==null?"":"female",u(X),u(W);var te=a(W,2),Ie=a(s(te));v(Ie),u(te);var ae=a(te,2),Me=a(s(ae));st(Me),u(ae);var le=a(ae,2),$e=a(s(le));v($e),u(le);var se=a(le,2),Be=a(s(se));v(Be),u(se);var ue=a(se,2),Fe=a(s(ue));v(Fe),u(ue);var re=a(ue,2),ke=a(s(re));v(ke),u(re);var ie=a(re,2),De=a(s(ie));v(De),u(ie);var Ee=a(ie,2),ne=a(s(Ee));d(()=>{e(y),ye(()=>{e(T)})});var oe=s(ne);oe.value=((oe.__value="")==null,"");var He=a(oe);Ke(He,1,()=>e(T),Te,(t,i)=>{var n=_t(),x={},ge=s(n,!0);u(n),d(()=>{x!==(x=e(i).id)&&(n.value=(n.__value=e(i).id)==null?"":e(i).id),q(ge,e(i).name)}),b(t,n)}),u(ne),u(Ee),u(Y);var pe=a(Y,2),ve=a(s(pe),2),Ue=a(s(ve));v(Ue),u(ve);var _e=a(ve,2),Ce=a(s(_e));v(Ce),u(_e);var de=a(_e,2),ce=a(s(de));d(()=>{e(f),ye(()=>{e(K)})});var be=s(ce);be.value=((be.__value="")==null,"");var Je=a(be);Ke(Je,1,()=>e(K),Te,(t,i)=>{var n=dt(),x={},ge=s(n,!0);u(n),d(()=>{x!==(x=e(i).id)&&(n.value=(n.__value=e(i).id)==null?"":e(i).id),q(ge,e(i).name)}),b(t,n)}),u(ce),u(de);var me=a(de,2),Ge=a(s(me));v(Ge),u(me);var Re=a(me,2),Le=a(s(Re));v(Le),u(Re),u(pe);var Oe=a(pe,2);ot(Oe,{type:"submit",get disabled(){return e(j)},children:(t,i)=>{tt();var n=lt();d(()=>q(n,e(j)?"Updating...":"Update Student")),b(t,n)},$$slots:{default:!0}});var je=a(Oe,2);{var Qe=t=>{var i=ct(),n=s(i,!0);u(i),d(()=>q(n,e(h))),b(t,i)};Ae(je,t=>{e(h)&&t(Qe)})}var Ve=a(je,2);{var We=t=>{var i=bt(),n=s(i,!0);u(i),d(()=>q(n,e(O))),b(t,i)};Ae(Ve,t=>{e(O)&&t(We)})}u(A),p(xe,()=>e(N),t=>l(N,t)),p(qe,()=>e(P),t=>l(P,t)),p(Se,()=>e(w),t=>l(w,t)),p(Ne,()=>e(I),t=>l(I,t)),p(Pe,()=>e(M),t=>l(M,t)),fe(X,()=>e(g),t=>l(g,t)),p(Ie,()=>e($),t=>l($,t)),p(Me,()=>e(B),t=>l(B,t)),p($e,()=>e(F),t=>l(F,t)),p(Be,()=>e(k),t=>l(k,t)),p(Fe,()=>e(D),t=>l(D,t)),p(ke,()=>e(E),t=>l(E,t)),p(De,()=>e(U),t=>l(U,t)),fe(ne,()=>e(y),t=>l(y,t)),p(Ue,()=>e(C),t=>l(C,t)),p(Ce,()=>e(G),t=>l(G,t)),fe(ce,()=>e(f),t=>l(f,t)),p(Ge,()=>e(R),t=>l(R,t)),p(Le,()=>e(L),t=>l(L,t)),at("submit",A,ze),b(c,A),et()}export{kt as component};
