import"../chunks/Bg9kRutz.js";import"../chunks/69_IOA4Y.js";import{p as Qe,t as p,c as a,s as l,w as e,aj as i,a as Ve,u as s,r,al as de,n as We}from"../chunks/BkCx6XBQ.js";import{s as d}from"../chunks/D7hMwOnl.js";import{i as Re}from"../chunks/BujD1wMw.js";import{e as je,i as Ae}from"../chunks/DMASutV1.js";import{t as m,f as Xe,a as _,b as Ze,r as et}from"../chunks/CkRD9fqL.js";import{r as b}from"../chunks/BQrLuGg-.js";import{b as v}from"../chunks/DPnNjdDr.js";import{b as me}from"../chunks/B_0iTO2t.js";import{i as tt}from"../chunks/fqoh2bZT.js";import{o as lt}from"../chunks/HM23sfSb.js";import{p as q}from"../chunks/DHkEQnsw.js";import{g as at}from"../chunks/DxocaHFr.js";import{B as rt}from"../chunks/BJPBFErB.js";var st=m("<option> </option>"),it=m("<option> </option>"),nt=m('<p class="error svelte-trbr1k"> </p>'),ot=m('<p class="success svelte-trbr1k"> </p>'),vt=m('<form class="svelte-trbr1k"><h1>Create Student</h1> <fieldset class="svelte-trbr1k"><legend>User Information</legend> <label class="svelte-trbr1k">Email: <input type="email" required class="svelte-trbr1k"></label> <label class="svelte-trbr1k">Full Name: <input type="text" required class="svelte-trbr1k"></label> <label class="svelte-trbr1k">NIK: <input type="text" required class="svelte-trbr1k"></label> <label class="svelte-trbr1k">Birth Date: <input type="date" required class="svelte-trbr1k"></label> <label class="svelte-trbr1k">Birth Place: <input type="text" required class="svelte-trbr1k"></label> <label class="svelte-trbr1k">Gender: <select required class="svelte-trbr1k"><option>Select Gender</option><option>Male</option><option>Female</option></select></label> <label class="svelte-trbr1k">Phone Number: <input type="text" class="svelte-trbr1k"></label> <label class="svelte-trbr1k">Address: <textarea class="svelte-trbr1k"></textarea></label> <label class="svelte-trbr1k">Father Name: <input type="text" class="svelte-trbr1k"></label> <label class="svelte-trbr1k">Mother Name: <input type="text" class="svelte-trbr1k"></label> <label class="svelte-trbr1k">Parent Phone: <input type="text" class="svelte-trbr1k"></label> <label class="svelte-trbr1k">Blood Type: <input type="text" class="svelte-trbr1k"></label> <label class="svelte-trbr1k">Role: <input type="text" required class="svelte-trbr1k"></label> <label class="svelte-trbr1k">Position: <select required class="svelte-trbr1k"><option>Select Position</option><!></select></label></fieldset> <fieldset class="svelte-trbr1k"><legend>Student Information</legend> <label class="svelte-trbr1k">NISM: <input type="text" required class="svelte-trbr1k"></label> <label class="svelte-trbr1k">NISN: <input type="text" required class="svelte-trbr1k"></label> <label class="svelte-trbr1k">Class: <select required class="svelte-trbr1k"><option>Select Class</option><!></select></label> <label class="svelte-trbr1k">Status: <input type="text" required class="svelte-trbr1k"></label> <label class="svelte-trbr1k">Entry Year: <input type="number" required class="svelte-trbr1k"></label></fieldset> <!> <!> <!></form>');function Nt(Ke,Te){Qe(Te,!1);let S=i(""),N=i(""),P=i(""),C=i(""),M=i(""),f=i(""),w=i(""),B=i(""),F=i(""),I=i(""),D=i(""),$=i(""),E=i(""),k=i(""),G=i(""),L=i(""),h=i(""),R=i(""),j=i(""),A=i([]),K=i([]),c=i(""),y=i(""),x=i(!1);lt(async()=>{try{s(A,await q.collection("classes").getFullList({sort:"grade"})),s(K,await q.collection("positions").getFullList())}catch(t){s(c,"Gagal mengambil data: "+t.message)}});async function Ue(t){t.preventDefault(),s(x,!0),s(c,""),s(y,"");try{const n={email:e(S),full_name:e(N),nik:e(P),birth_date:e(C),birth_place:e(M),gender:e(f),phone_number:e(w),address:e(B),father_name:e(F),mother_name:e(I),parent_phone:e(D),blood_type:e($),role:e(E),position_id:e(k)},o=await q.collection("users").create(n),u={nism:e(G),nisn:e(L),status:e(R),entry_year:e(j),class_id:e(h),user_id:o.id};await q.collection("students").create(u),s(y,"Student berhasil dibuat!"),at("/students")}catch(n){s(c,"Error: "+n.message)}finally{s(x,!1)}}tt();var g=vt(),T=l(a(g),2),U=l(a(T),2),fe=l(a(U));b(fe),r(U);var Y=l(U,2),ke=l(a(Y));b(ke),r(Y);var z=l(Y,2),he=l(a(z));b(he),r(z);var H=l(z,2),ye=l(a(H));b(ye),r(H);var J=l(H,2),xe=l(a(J));b(xe),r(J);var O=l(J,2),Q=l(a(O));p(()=>{e(f),de(()=>{})});var V=a(Q);V.value=((V.__value="")==null,"");var W=l(V);W.value=(W.__value="male")==null?"":"male";var ge=l(W);ge.value=(ge.__value="female")==null?"":"female",r(Q),r(O);var X=l(O,2),qe=l(a(X));b(qe),r(X);var Z=l(X,2),Se=l(a(Z));et(Se),r(Z);var ee=l(Z,2),Ne=l(a(ee));b(Ne),r(ee);var te=l(ee,2),Pe=l(a(te));b(Pe),r(te);var le=l(te,2),Ce=l(a(le));b(Ce),r(le);var ae=l(le,2),Me=l(a(ae));b(Me),r(ae);var re=l(ae,2),we=l(a(re));b(we),r(re);var Be=l(re,2),se=l(a(Be));p(()=>{e(k),de(()=>{e(K)})});var ie=a(se);ie.value=((ie.__value="")==null,"");var Ye=l(ie);je(Ye,1,()=>e(K),Ae,(t,n)=>{var o=st(),u={},ce=a(o,!0);r(o),p(()=>{u!==(u=e(n).id)&&(o.value=(o.__value=e(n).id)==null?"":e(n).id),d(ce,e(n).name)}),_(t,o)}),r(se),r(Be),r(T);var ne=l(T,2),oe=l(a(ne),2),Fe=l(a(oe));b(Fe),r(oe);var ve=l(oe,2),Ie=l(a(ve));b(Ie),r(ve);var be=l(ve,2),pe=l(a(be));p(()=>{e(h),de(()=>{e(A)})});var ue=a(pe);ue.value=((ue.__value="")==null,"");var ze=l(ue);je(ze,1,()=>e(A),Ae,(t,n)=>{var o=it(),u={},ce=a(o,!0);r(o),p(()=>{u!==(u=e(n).id)&&(o.value=(o.__value=e(n).id)==null?"":e(n).id),d(ce,e(n).name)}),_(t,o)}),r(pe),r(be);var _e=l(be,2),De=l(a(_e));b(De),r(_e);var $e=l(_e,2),Ee=l(a($e));b(Ee),r($e),r(ne);var Ge=l(ne,2);rt(Ge,{type:"submit",get disabled(){return e(x)},children:(t,n)=>{We();var o=Ze();p(()=>d(o,e(x)?"Creating...":"Create Student")),_(t,o)},$$slots:{default:!0}});var Le=l(Ge,2);{var He=t=>{var n=nt(),o=a(n,!0);r(n),p(()=>d(o,e(c))),_(t,n)};Re(Le,t=>{e(c)&&t(He)})}var Je=l(Le,2);{var Oe=t=>{var n=ot(),o=a(n,!0);r(n),p(()=>d(o,e(y))),_(t,n)};Re(Je,t=>{e(y)&&t(Oe)})}r(g),v(fe,()=>e(S),t=>s(S,t)),v(ke,()=>e(N),t=>s(N,t)),v(he,()=>e(P),t=>s(P,t)),v(ye,()=>e(C),t=>s(C,t)),v(xe,()=>e(M),t=>s(M,t)),me(Q,()=>e(f),t=>s(f,t)),v(qe,()=>e(w),t=>s(w,t)),v(Se,()=>e(B),t=>s(B,t)),v(Ne,()=>e(F),t=>s(F,t)),v(Pe,()=>e(I),t=>s(I,t)),v(Ce,()=>e(D),t=>s(D,t)),v(Me,()=>e($),t=>s($,t)),v(we,()=>e(E),t=>s(E,t)),me(se,()=>e(k),t=>s(k,t)),v(Fe,()=>e(G),t=>s(G,t)),v(Ie,()=>e(L),t=>s(L,t)),me(pe,()=>e(h),t=>s(h,t)),v(De,()=>e(R),t=>s(R,t)),v(Ee,()=>e(j),t=>s(j,t)),Xe("submit",g,Ue),_(Ke,g),Ve()}export{Nt as component};
