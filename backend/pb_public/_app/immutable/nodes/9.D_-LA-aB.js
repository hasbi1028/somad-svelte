import"../chunks/Bg9kRutz.js";import{f as a,p as se,a as oe,w as l,x as ne,c as Z,y as je,r as W,t as ee,n as _,s as d,u as K,v as Me,a7 as Qt}from"../chunks/BkCx6XBQ.js";import{s as Ae}from"../chunks/D7hMwOnl.js";import{i as Ne}from"../chunks/BujD1wMw.js";import{e as qt,i as mr}from"../chunks/DMASutV1.js";import{c as h,a as t,t as m,b as P}from"../chunks/CkRD9fqL.js";import{c as r}from"../chunks/D__qNMiv.js";import{a as Ie,s as hr}from"../chunks/BQrLuGg-.js";import{p as Fe}from"../chunks/BR42hutG.js";import{l as gr,s as Ve,p as w,r as ce,b as nt}from"../chunks/Cb_y5l8Q.js";import{o as pr}from"../chunks/HM23sfSb.js";import{p as pe}from"../chunks/DHkEQnsw.js";import{a as $r,b as Lt,c as Ht,d as Jt,e as br,B as Pr}from"../chunks/BeBjOvxi.js";import{S as Xt}from"../chunks/DiPDI82c.js";import{M as xr}from"../chunks/BFrK5w_s.js";import{I as ir}from"../chunks/Cdev0lgh.js";import{S as yr}from"../chunks/CthEeDcE.js";import{_ as wr,$ as kr,a0 as Cr,a1 as Dr,a2 as Sr,a3 as Tr,Z as zr}from"../chunks/DWlIzlWr.js";import{a as Se,b as Et,c as Lr,B as Oe}from"../chunks/BJPBFErB.js";import{u as dr,c as Er,P as Br,a as Ur,b as yt}from"../chunks/DGEqyT8o.js";import{s as ge}from"../chunks/BEjr47fl.js";import{u as gt,b as $e,m as pt}from"../chunks/CIx-7lj2.js";import{C as cr}from"../chunks/BrY5s5FB.js";import{C as ur}from"../chunks/qoFV1rY9.js";import{E as vr}from"../chunks/DPlEBOOM.js";import{C as jr}from"../chunks/Bw9BMo8R.js";import{C as Ir,a as Rr,b as Ar,c as Fr,D as Mr}from"../chunks/CQvWrHC_.js";import{C as Vr}from"../chunks/DdMQ30ac.js";import{R as Or,T as Nr,D as Kr,G as Gr,a as Zt}from"../chunks/SNTrU5rF.js";import{T as Qr,a as qr,b as Wt,c as et,d as Hr,e as tt}from"../chunks/DzcPGjmC.js";import{T as Jr,a as wt,b as Xr,R as Zr}from"../chunks/BjIeEScR.js";import{D as Wr}from"../chunks/DE1JWFaN.js";import{U as Yr}from"../chunks/2avjNuh9.js";import"../chunks/69_IOA4Y.js";import{s as ea}from"../chunks/BLRw9oEH.js";import{I as ta}from"../chunks/CHESamPX.js";import{g as ra}from"../chunks/DxocaHFr.js";import{S as aa}from"../chunks/49nKD9xz.js";import{C as sa}from"../chunks/ChZkS7ys.js";function oa(f,e){const o=gr(e,["children","$$slots","$$events","$$legacy"]);ta(f,Ve({name:"download"},()=>o,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(s,n)=>{var c=h(),i=a(c);ea(i,e,"default",{},null),t(s,c)},$$slots:{default:!0}}))}var la=m("<div><!></div>");function na(f,e){se(e,!0);let o=w(e,"id",19,gt),u=w(e,"ref",15,null),s=w(e,"level",3,2),n=ce(e,["$$slots","$$events","$$legacy","id","ref","child","children","level"]);const c=wr({id:$e.with(()=>o()),level:$e.with(()=>s()),ref:$e.with(()=>u(),x=>u(x))}),i=ne(()=>pt(n,c.props));var p=h(),y=a(p);{var G=x=>{var v=h(),$=a(v);ge($,()=>e.child,()=>({props:l(i)})),t(x,v)},z=x=>{var v=la();let $;var F=Z(v);ge(F,()=>e.children??je),W(v),ee(()=>$=Ie(v,$,{...l(i)})),t(x,v)};Ne(y,x=>{e.child?x(G):x(z,!1)})}t(f,p),oe()}var ia=m("<div><!></div>");function da(f,e){se(e,!0);let o=w(e,"id",19,gt),u=w(e,"ref",15,null),s=ce(e,["$$slots","$$events","$$legacy","id","children","child","ref"]);const n=kr({id:$e.with(()=>o()),ref:$e.with(()=>u(),z=>u(z))}),c=ne(()=>pt(s,n.props));var i=h(),p=a(i);{var y=z=>{var x=h(),v=a(x);ge(v,()=>e.child,()=>({props:l(c)})),t(z,x)},G=z=>{var x=ia();let v;var $=Z(x);ge($,()=>e.children??je),W(x),ee(()=>v=Ie(x,v,{...l(c)})),t(z,x)};Ne(p,z=>{e.child?z(y):z(G,!1)})}t(f,i),oe()}var ca=m("<button><!></button>");function ua(f,e){se(e,!0);let o=w(e,"id",19,gt),u=w(e,"ref",15,null),s=w(e,"type",3,"button"),n=w(e,"disabled",3,!1),c=ce(e,["$$slots","$$events","$$legacy","id","child","children","ref","type","disabled"]);const i=dr({type:"prev",id:$e.with(()=>o()),ref:$e.with(()=>u(),v=>u(v)),disabled:$e.with(()=>!!n())}),p=ne(()=>pt(c,i.props,{type:s()}));var y=h(),G=a(y);{var z=v=>{var $=h(),F=a($);ge(F,()=>e.child,()=>({props:l(p)})),t(v,$)},x=v=>{var $=ca();let F;var S=Z($);ge(S,()=>e.children??je),W($),ee(()=>F=Ie($,F,{...l(p)})),t(v,$)};Ne(G,v=>{e.child?v(z):v(x,!1)})}t(f,y),oe()}var va=m("<button><!></button>");function fa(f,e){se(e,!0);let o=w(e,"id",19,gt),u=w(e,"ref",15,null),s=w(e,"type",3,"button"),n=w(e,"disabled",3,!1),c=ce(e,["$$slots","$$events","$$legacy","id","child","children","ref","type","disabled"]);const i=dr({type:"next",id:$e.with(()=>o()),ref:$e.with(()=>u(),v=>u(v)),disabled:$e.with(()=>!!n())}),p=ne(()=>pt(c,i.props,{type:s()}));var y=h(),G=a(y);{var z=v=>{var $=h(),F=a($);ge(F,()=>e.child,()=>({props:l(p)})),t(v,$)},x=v=>{var $=va();let F;var S=Z($);ge(S,()=>e.children??je),W($),ee(()=>F=Ie($,F,{...l(p)})),t(v,$)};Ne(G,v=>{e.child?v(z):v(x,!1)})}t(f,y),oe()}var _a=m("<button><!></button>");function ma(f,e){se(e,!0);let o=w(e,"id",19,gt),u=w(e,"type",3,"button"),s=w(e,"ref",15,null),n=w(e,"disabled",3,!1),c=ce(e,["$$slots","$$events","$$legacy","id","page","child","children","type","ref","disabled"]);const i=Er({id:$e.with(()=>o()),page:$e.with(()=>e.page),ref:$e.with(()=>s(),v=>s(v)),disabled:$e.with(()=>!!n())}),p=ne(()=>pt(c,i.props,{type:u()}));var y=h(),G=a(y);{var z=v=>{var $=h(),F=a($);ge(F,()=>e.child,()=>({props:l(p)})),t(v,$)},x=v=>{var $=_a();let F;var S=Z($);{var M=V=>{var U=h(),be=a(U);ge(be,()=>e.children??je),t(V,U)},B=V=>{var U=P();ee(()=>Ae(U,e.page.value)),t(V,U)};Ne(S,V=>{e.children?V(M):V(B,!1)})}W($),ee(()=>F=Ie($,F,{...l(p)})),t(v,$)};Ne(G,v=>{e.child?v(z):v(x,!1)})}t(f,y),oe()}function ha(f,e){se(e,!0);const o=z=>{_();var x=P();ee(()=>Ae(x,e.page.value)),t(z,x)};let u=w(e,"ref",15,null),s=w(e,"size",3,"icon"),n=w(e,"isActive",3,!1),c=ce(e,["$$slots","$$events","$$legacy","ref","class","size","isActive","page","children"]);var i=h(),p=a(i);const y=ne(()=>Se(Et({variant:n()?"outline":"ghost",size:s()}),e.class)),G=ne(()=>e.children||o);r(p,()=>ma,(z,x)=>{x(z,Ve({get page(){return e.page},get class(){return l(y)},get children(){return l(G)}},()=>c,{get ref(){return u()},set ref(v){u(v)}}))}),t(f,i),oe()}const ga=f=>{var e=pa(),o=a(e);cr(o,{class:"size-4"}),_(2),t(f,e)};var pa=m("<!> <span>Previous</span>",1);function $a(f,e){se(e,!0);let o=w(e,"ref",15,null),u=ce(e,["$$slots","$$events","$$legacy","ref","class","children"]);var s=h(),n=a(s);const c=ne(()=>Se(Et({variant:"ghost",class:"gap-1 pl-2.5"}),e.class)),i=ne(()=>e.children||ga);r(n,()=>ua,(p,y)=>{y(p,Ve({get class(){return l(c)},get children(){return l(i)}},()=>u,{get ref(){return o()},set ref(G){o(G)}}))}),t(f,s),oe()}const ba=f=>{var e=Pa(),o=d(a(e),2);ur(o,{class:"size-4"}),t(f,e)};var Pa=m("<span>Next</span> <!>",1);function xa(f,e){se(e,!0);let o=w(e,"ref",15,null),u=ce(e,["$$slots","$$events","$$legacy","ref","class","children"]);var s=h(),n=a(s);const c=ne(()=>Se(Et({variant:"ghost",class:"gap-1 pr-2.5"}),e.class)),i=ne(()=>e.children||ba);r(n,()=>fa,(p,y)=>{y(p,Ve({get class(){return l(c)},get children(){return l(i)}},()=>u,{get ref(){return o()},set ref(G){o(G)}}))}),t(f,s),oe()}var ya=m('<span><!> <span class="sr-only">More pages</span></span>');function wa(f,e){se(e,!0);let o=w(e,"ref",15,null),u=ce(e,["$$slots","$$events","$$legacy","ref","class"]);var s=ya();let n;var c=Z(s);vr(c,{class:"size-4"}),_(2),W(s),nt(s,i=>o(i),()=>o()),ee(i=>n=Ie(s,n,{"aria-hidden":"true",class:i,...u}),[()=>Se("flex size-9 items-center justify-center",e.class)]),t(f,s),oe()}function Yt(f,e){se(e,!0);let o=w(e,"ref",15,null),u=ce(e,["$$slots","$$events","$$legacy","ref","class"]);var s=h(),n=a(s);const c=ne(()=>Se("text-lg font-semibold leading-none tracking-tight",e.class));r(n,()=>na,(i,p)=>{p(i,Ve({get class(){return l(c)}},()=>u,{get ref(){return o()},set ref(y){o(y)}}))}),t(f,s),oe()}var ka=m("<div><!></div>");function er(f,e){se(e,!0);let o=w(e,"ref",15,null),u=ce(e,["$$slots","$$events","$$legacy","ref","class","children"]);var s=ka();let n;var c=Z(s);ge(c,()=>e.children??je),W(s),nt(s,i=>o(i),()=>o()),ee(i=>n=Ie(s,n,{class:i,...u}),[()=>Se("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e.class)]),t(f,s),oe()}var Ca=m("<div><!></div>");function tr(f,e){se(e,!0);let o=w(e,"ref",15,null),u=ce(e,["$$slots","$$events","$$legacy","ref","class","children"]);var s=Ca();let n;var c=Z(s);ge(c,()=>e.children??je),W(s),nt(s,i=>o(i),()=>o()),ee(i=>n=Ie(s,n,{class:i,...u}),[()=>Se("flex flex-col space-y-1.5 text-center sm:text-left",e.class)]),t(f,s),oe()}function Da(f,e){se(e,!0);let o=w(e,"ref",15,null),u=ce(e,["$$slots","$$events","$$legacy","ref","class"]);var s=h(),n=a(s);const c=ne(()=>Se("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50 bg-black/80",e.class));r(n,()=>Cr,(i,p)=>{p(i,Ve({get class(){return l(c)}},()=>u,{get ref(){return o()},set ref(y){o(y)}}))}),t(f,s),oe()}var Sa=m('<!> <span class="sr-only">Close</span>',1),Ta=m("<!> <!>",1),za=m("<!> <!>",1);function rr(f,e){se(e,!0);let o=w(e,"ref",15,null),u=ce(e,["$$slots","$$events","$$legacy","ref","class","portalProps","children"]);var s=h(),n=a(s);r(n,()=>La,(c,i)=>{i(c,Ve(()=>e.portalProps,{children:(p,y)=>{var G=za(),z=a(G);r(z,()=>Da,($,F)=>{F($,{})});var x=d(z,2);const v=ne(()=>Se("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] bg-background fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg",e.class));r(x,()=>Dr,($,F)=>{F($,Ve({get class(){return l(v)}},()=>u,{get ref(){return o()},set ref(S){o(S)},children:(S,M)=>{var B=Ta(),V=a(B);ge(V,()=>e.children??je);var U=d(V,2);r(U,()=>Sr,(be,ke)=>{ke(be,{class:"ring-offset-background focus:ring-ring absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:(Pe,Te)=>{var b=Sa(),J=a(b);Tr(J,{class:"size-4"}),_(2),t(Pe,b)},$$slots:{default:!0}})}),t(S,B)},$$slots:{default:!0}}))}),t(p,G)},$$slots:{default:!0}}))}),t(f,s),oe()}function ar(f,e){se(e,!0);let o=w(e,"ref",15,null),u=ce(e,["$$slots","$$events","$$legacy","ref","class"]);var s=h(),n=a(s);const c=ne(()=>Se("text-muted-foreground text-sm",e.class));r(n,()=>da,(i,p)=>{p(i,Ve({get class(){return l(c)}},()=>u,{get ref(){return o()},set ref(y){o(y)}}))}),t(f,s),oe()}const sr=Wr,La=zr,Ea=Lr({base:"[&>svg]:text-foreground relative w-full rounded-lg border p-4 [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg~*]:pl-7",variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}});var Ba=m("<div><!></div>");function or(f,e){se(e,!0);let o=w(e,"ref",15,null),u=w(e,"variant",3,"default"),s=ce(e,["$$slots","$$events","$$legacy","ref","class","variant","children"]);var n=Ba();let c;var i=Z(n);ge(i,()=>e.children??je),W(n),nt(n,p=>o(p),()=>o()),ee(p=>c=Ie(n,c,{class:p,...s,role:"alert"}),[()=>Se(Ea({variant:u()}),e.class)]),t(f,n),oe()}var Ua=m("<div><!></div>");function lr(f,e){se(e,!0);let o=w(e,"ref",15,null),u=ce(e,["$$slots","$$events","$$legacy","ref","class","children"]);var s=Ua();let n;var c=Z(s);ge(c,()=>e.children??je),W(s),nt(s,i=>o(i),()=>o()),ee(i=>n=Ie(s,n,{class:i,...u}),[()=>Se("text-sm [&_p]:leading-relaxed",e.class)]),t(f,s),oe()}var ja=m("<div><!></div>");function nr(f,e){se(e,!0);let o=w(e,"ref",15,null),u=w(e,"level",3,5),s=ce(e,["$$slots","$$events","$$legacy","ref","class","level","children"]);var n=ja();let c;var i=Z(n);ge(i,()=>e.children??je),W(n),nt(n,p=>o(p),()=>o()),ee(p=>c=Ie(n,c,{role:"heading","aria-level":u(),class:p,...s}),[()=>Se("mb-1 font-medium leading-none tracking-tight",e.class)]),t(f,n),oe()}var Ia=m('<!> <span class="sr-only sm:not-sr-only sm:whitespace-nowrap">Impor</span>',1),Ra=m('<!> <span class="sr-only sm:not-sr-only sm:whitespace-nowrap">Ekspor</span>',1),Aa=m("<!> <!>",1),Fa=m("<!> <!>",1),Ma=m("<!> <!>",1),Va=m("<!> <!>",1),Oa=m('<!> <div class="grid gap-4 py-4"><div class="flex flex-col gap-4"><!> <!></div> <!> <!></div> <!>',1),Na=m("<!> <!>",1),Ka=m('<!> <div class="grid gap-4 py-4"><!></div> <!>',1),Ga=m("<!> <!> <!> <!>",1);function Qa(f,e){se(e,!0);let o=Me(!1),u=Me(!1),s=Me(null),n=Me(""),c=Me("");Fe([]);function i(){const M=["email","nik","full_name","birth_place","birth_date","gender","phone_number","address","father_name","mother_name","parent_phone","blood_type","role","position","nism","nisn","class","status","entry_year"].join(",")+`
`,B=new Blob([M],{type:"text/csv"}),V=URL.createObjectURL(B),U=document.createElement("a");U.href=V,U.download="template_siswa.csv",document.body.appendChild(U),U.click(),URL.revokeObjectURL(V),document.body.removeChild(U),K(u,!1)}async function p(){try{const[S,M,B,V]=await Promise.all([pe.collection("students").getFullList(),pe.collection("users").getFullList(),pe.collection("classes").getFullList(),pe.collection("positions").getFullList()]),U=Object.fromEntries(M.map(k=>[k.id,k])),be=Object.fromEntries(B.map(k=>[k.id,k])),ke=Object.fromEntries(V.map(k=>[k.id,k])),Pe=["email","nik","full_name","birth_place","birth_date","gender","phone_number","address","father_name","mother_name","parent_phone","blood_type","role","position","nism","nisn","class","status","entry_year"],Te=S.map(k=>{const C=U[k.user_id]||{},ue=be[k.class_id]||{},j=C.position_id?ke[C.position_id]||{}:{};return Pe.map(Ke=>{switch(Ke){case"email":return C.email||"";case"nik":return C.nik||"";case"full_name":return C.full_name||"";case"birth_place":return C.birth_place||"";case"birth_date":return C.birth_date||"";case"gender":return C.gender||"";case"phone_number":return C.phone_number||"";case"address":return C.address||"";case"father_name":return C.father_name||"";case"mother_name":return C.mother_name||"";case"parent_phone":return C.parent_phone||"";case"blood_type":return C.blood_type||"";case"role":return C.role||"";case"position":return j.name||"";case"nism":return k.nism||"";case"nisn":return k.nisn||"";case"class":return ue.name||"";case"status":return k.status||"";case"entry_year":return k.entry_year||"";default:return""}}).join(",")}),b=[Pe.join(","),...Te].join(`
`),J=new Blob([b],{type:"text/csv;charset=utf-8;"}),g=URL.createObjectURL(J),te=document.createElement("a");te.href=g,te.download="data_siswa.csv",document.body.appendChild(te),te.click(),document.body.removeChild(te),URL.revokeObjectURL(g),console.log("Export berhasil.")}catch(S){console.error("Error exporting students:",S)}}function y(S){const M=S.target;M.files&&M.files.length>0&&K(s,Fe(M.files[0]))}async function G(){if(!l(s)){K(c,"Silakan pilih file CSV");return}K(n,"Mengimpor..."),K(c,"");try{const M=(await l(s).text()).split(`
`).filter(b=>b.trim()!=="");if(M.length<2){K(c,"File CSV tidak memiliki data."),K(n,"");return}console.log(M+"ini data rows");const B=M[0].split(",").map(b=>b.trim()),[V,U]=await Promise.all([pe.collection("positions").getFullList(),pe.collection("classes").getFullList()]),be={};V.forEach(b=>{b.name&&(be[b.name]=b.id)});const ke={};U.forEach(b=>{b.name&&(ke[b.name]=b.id)});let Pe=0,Te=0;for(let b=1;b<M.length;b++)try{const J=M[b].split(",").map(j=>j.trim());if(J.length===0||J.every(j=>j===""))continue;const g={};B.forEach((j,ie)=>{g[j]=J[ie]||""});const te=g.nik;if(!te)throw new Error(`Baris ${b} tidak memiliki nilai NIK untuk auto generate.`);const k={email:g.email||`${te}@example.com`,nik:te,full_name:g.full_name,birth_place:g.birth_place,birth_date:g.birth_date,gender:g.gender,phone_number:g.phone_number,address:g.address,father_name:g.father_name,mother_name:g.mother_name,parent_phone:g.parent_phone,blood_type:g.blood_type,role:g.role,password:g.password||te,passwordConfirm:g.passwordConfirm||te};g.position&&(k.position_id=be[g.position]||"");const C={nism:g.nism,nisn:g.nisn,status:g.status,entry_year:g.entry_year};g.class&&(C.class_id=ke[g.class]||"");const ue=await pe.collection("users").getList(1,1,{filter:`email = "${k.email}"`});if(ue.items.length>0){const j=ue.items[0];await pe.collection("users").update(j.id,k);const ie=await pe.collection("students").getList(1,1,{filter:`user_id = "${j.id}"`});ie.items.length>0?await pe.collection("students").update(ie.items[0].id,C):await pe.collection("students").create({...C,user_id:j.id})}else{const j=await pe.collection("users").create(k);console.log(k),await pe.collection("students").create({...C,user_id:j.id})}Pe++}catch(J){console.error(`Error processing row ${b}:`,J),Te++}K(n,`Impor selesai: ${Pe} siswa berhasil diimpor/diperbarui, ${Te} kesalahan.`),Te===0&&setTimeout(()=>{K(o,!1),K(n,""),K(s,null)},3e3)}catch(S){console.error("Error parsing CSV:",S),K(c,"Terjadi kesalahan saat memproses file CSV. Pastikan formatnya benar."),K(n,"")}}var z=Ga(),x=a(z);Oe(x,{size:"sm",variant:"outline",class:"h-7 gap-1",onclick:()=>K(o,!0),children:(S,M)=>{var B=Ia(),V=a(B);Yr(V,{class:"size-3.5"}),_(2),t(S,B)},$$slots:{default:!0}});var v=d(x,2);Oe(v,{size:"sm",variant:"outline",class:"h-7 gap-1",onclick:()=>K(u,!0),children:(S,M)=>{var B=Ra(),V=a(B);oa(V,{class:"size-3.5"}),_(2),t(S,B)},$$slots:{default:!0}});var $=d(v,2);r($,()=>sr,(S,M)=>{M(S,{get open(){return l(o)},set open(B){K(o,Fe(B))},children:(B,V)=>{var U=h(),be=a(U);r(be,()=>rr,(ke,Pe)=>{Pe(ke,{class:"sm:max-w-[425px]",children:(Te,b)=>{var J=Oa(),g=a(J);r(g,()=>tr,(O,Q)=>{Q(O,{children:(ae,ve)=>{var I=Aa(),E=a(I);r(E,()=>Yt,(de,D)=>{D(de,{children:(R,T)=>{_();var N=P("Impor Data Siswa");t(R,N)},$$slots:{default:!0}})});var _e=d(E,2);r(_e,()=>ar,(de,D)=>{D(de,{children:(R,T)=>{_();var N=P("Unggah file CSV dengan data siswa untuk mengimpor atau memperbarui data.");t(R,N)},$$slots:{default:!0}})}),t(ae,I)},$$slots:{default:!0}})});var te=d(g,2),k=Z(te),C=Z(k);ir(C,{type:"file",accept:".csv",onchange:y,"aria-label":"Unggah file CSV"});var ue=d(C,2);Oe(ue,{variant:"outline",onclick:i,children:(O,Q)=>{_();var ae=P("Unduh Template CSV");t(O,ae)},$$slots:{default:!0}}),W(k);var j=d(k,2);{var ie=O=>{var Q=h(),ae=a(Q);r(ae,()=>or,(ve,I)=>{I(ve,{children:(E,_e)=>{var de=Fa(),D=a(de);r(D,()=>nr,(T,N)=>{N(T,{children:(X,Ge)=>{_();var re=P("Status Impor");t(X,re)},$$slots:{default:!0}})});var R=d(D,2);r(R,()=>lr,(T,N)=>{N(T,{children:(X,Ge)=>{_();var re=P();ee(()=>Ae(re,l(n))),t(X,re)},$$slots:{default:!0}})}),t(E,de)},$$slots:{default:!0}})}),t(O,Q)};Ne(j,O=>{l(n)&&O(ie)})}var Ke=d(j,2);{var Le=O=>{var Q=h(),ae=a(Q);r(ae,()=>or,(ve,I)=>{I(ve,{variant:"destructive",children:(E,_e)=>{var de=Ma(),D=a(de);r(D,()=>nr,(T,N)=>{N(T,{children:(X,Ge)=>{_();var re=P("Kesalahan");t(X,re)},$$slots:{default:!0}})});var R=d(D,2);r(R,()=>lr,(T,N)=>{N(T,{children:(X,Ge)=>{_();var re=P();ee(()=>Ae(re,l(c))),t(X,re)},$$slots:{default:!0}})}),t(E,de)},$$slots:{default:!0}})}),t(O,Q)};Ne(Ke,O=>{l(c)&&O(Le)})}W(te);var xe=d(te,2);r(xe,()=>er,(O,Q)=>{Q(O,{children:(ae,ve)=>{var I=Va(),E=a(I);Oe(E,{variant:"outline",onclick:()=>K(o,!1),children:(D,R)=>{_();var T=P("Batal");t(D,T)},$$slots:{default:!0}});var _e=d(E,2);const de=ne(()=>!l(s));Oe(_e,{onclick:G,get disabled(){return l(de)},children:(D,R)=>{_();var T=P("Impor");t(D,T)},$$slots:{default:!0}}),t(ae,I)},$$slots:{default:!0}})}),t(Te,J)},$$slots:{default:!0}})}),t(B,U)},$$slots:{default:!0}})});var F=d($,2);return r(F,()=>sr,(S,M)=>{M(S,{get open(){return l(u)},set open(B){K(u,Fe(B))},children:(B,V)=>{var U=h(),be=a(U);r(be,()=>rr,(ke,Pe)=>{Pe(ke,{class:"sm:max-w-[425px]",children:(Te,b)=>{var J=Ka(),g=a(J);r(g,()=>tr,(ue,j)=>{j(ue,{children:(ie,Ke)=>{var Le=Na(),xe=a(Le);r(xe,()=>Yt,(Q,ae)=>{ae(Q,{children:(ve,I)=>{_();var E=P("Ekspor Data Siswa");t(ve,E)},$$slots:{default:!0}})});var O=d(xe,2);r(O,()=>ar,(Q,ae)=>{ae(Q,{children:(ve,I)=>{_();var E=P("Unduh data siswa dalam format CSV.");t(ve,E)},$$slots:{default:!0}})}),t(ie,Le)},$$slots:{default:!0}})});var te=d(g,2),k=Z(te);Oe(k,{variant:"outline",onclick:p,children:(ue,j)=>{_();var ie=P("Ekspor Data Siswa");t(ue,ie)},$$slots:{default:!0}}),W(te);var C=d(te,2);r(C,()=>er,(ue,j)=>{j(ue,{children:(ie,Ke)=>{Oe(ie,{variant:"outline",onclick:()=>K(u,!1),children:(Le,xe)=>{_();var O=P("Tutup");t(Le,O)},$$slots:{default:!0}})},$$slots:{default:!0}})}),t(Te,J)},$$slots:{default:!0}})}),t(B,U)},$$slots:{default:!0}})}),t(f,z),oe({exportStudents:p,importStudents:G})}var qa=m('<span class="hover:underline">Dashboard</span>'),Ha=m('<a href="/students">Data Siswa</a>'),Ja=m("<!> <!> <!> <!> <!>",1),Xa=m("<!> <!> <!> <!>",1),Za=m('<!> <a href="/students/create" class="sr-only sm:not-sr-only sm:whitespace-nowrap">Tambah  Siswa</a>',1),Wa=m("<!> <!>",1),Ya=m("<!> <!> <!> <!> <!> <!> <!>",1),es=m('<img alt="User" class="aspect-square rounded-md object-cover" height="64" width="64">'),ts=m('<!> <span class="sr-only">Toggle menu</span>',1),rs=m("<!> <!> <!>",1),as=m("<!> <!>",1),ss=m("<!> <!> <!> <!> <!> <!> <!>",1),os=m("<!> <!>",1),ls=m('<!> <span class="hidden sm:block">Previous</span>',1),ns=m('<span class="hidden sm:block">Next</span> <!>',1),is=m("<!> <!> <!>",1),ds=m('<!> <div class="overflow-x-auto"><!></div> <!>',1),cs=m('<div class="flex items-center"><!> <div class="ml-auto flex items-center gap-2"><!> <!></div></div> <!>',1),us=m('<header class="flex flex-col md:flex-row h-auto md:h-16 gap-4 md:gap-2 px-4 py-2"><div class="flex items-center justify-between w-full md:w-auto"><div class="flex items-center gap-3"><!> <!> <!> <!></div> <div class="relative ml-auto flex flex-1 items-center justify-end"><!> <!></div></div></header> <div class="flex flex-1 flex-col gap-4 p-10 pt-0"><main class="grid flex-1 items-start"><!></main></div>',1);function Ws(f,e){se(e,!0);const o=new xr("(min-width: 768px)"),u=ne(()=>o.current?5:8),s=ne(()=>o.current?1:0);let n=Me(Fe([])),c=Me(""),i=Me(1),p=Me(0),y=Me("all");Qt(()=>{l(y)&&K(i,1)});async function G(){try{const b=[];l(c).trim()&&b.push(`user_id.full_name ~ "${l(c)}"`),l(y)!=="all"&&b.push(`status = "${l(y)}"`);const J=b.join(" && "),g=await pe.collection("students").getList(l(i),l(u),{filter:J,expand:"user_id,class_id"});K(n,Fe(g.items)),K(p,Fe(g.totalItems))}catch(b){console.error("Error fetching students:",b)}}pr(()=>{G()}),Qt(()=>{l(c),l(i),l(y),G()});var z=us(),x=a(z),v=Z(x),$=Z(v),F=Z($);r(F,()=>yr,(b,J)=>{J(b,{class:"-ml-1"})});var S=d(F,2);Xt(S,{orientation:"vertical",class:"mr-2 h-4"});var M=d(S,2);Xt(M,{orientation:"vertical",class:"mr-2 h-4"});var B=d(M,2);r(B,()=>Pr,(b,J)=>{J(b,{children:(g,te)=>{var k=h(),C=a(k);r(C,()=>$r,(ue,j)=>{j(ue,{children:(ie,Ke)=>{var Le=Ja(),xe=a(Le);r(xe,()=>Lt,(I,E)=>{E(I,{class:"hidden md:block",children:(_e,de)=>{var D=h(),R=a(D);r(R,()=>Ht,(T,N)=>{N(T,{href:"#",children:(X,Ge)=>{_();var re=P("Menu Tambahan");t(X,re)},$$slots:{default:!0}})}),t(_e,D)},$$slots:{default:!0}})});var O=d(xe,2);r(O,()=>Jt,(I,E)=>{E(I,{class:"hidden md:block"})});var Q=d(O,2);r(Q,()=>Lt,(I,E)=>{E(I,{children:(_e,de)=>{var D=h(),R=a(D);r(R,()=>Ht,(T,N)=>{N(T,{href:"/dashboard",children:(X,Ge)=>{var re=qa();t(X,re)},$$slots:{default:!0}})}),t(_e,D)},$$slots:{default:!0}})});var ae=d(Q,2);r(ae,()=>Jt,(I,E)=>{E(I,{})});var ve=d(ae,2);r(ve,()=>Lt,(I,E)=>{E(I,{children:(_e,de)=>{var D=h(),R=a(D);r(R,()=>br,(T,N)=>{N(T,{children:(X,Ge)=>{var re=Ha();t(X,re)},$$slots:{default:!0}})}),t(_e,D)},$$slots:{default:!0}})}),t(ie,Le)},$$slots:{default:!0}})}),t(g,k)},$$slots:{default:!0}})}),W($);var V=d($,2),U=Z(V);ir(U,{type:"search",placeholder:"Cari Siswa",class:"bg-background w-full rounded-lg pr-8 md:w-[200px] lg:w-[320px]",get value(){return l(c)},set value(b){K(c,Fe(b))}});var be=d(U,2);aa(be,{class:"text-muted-foreground absolute right-2.5 top-2.5 size-4"}),W(V),W(v),W(x);var ke=d(x,2),Pe=Z(ke),Te=Z(Pe);r(Te,()=>Zr,(b,J)=>{J(b,{get value(){return l(y)},set value(g){K(y,Fe(g))},children:(g,te)=>{var k=cs(),C=a(k),ue=Z(C);r(ue,()=>Jr,(xe,O)=>{O(xe,{children:(Q,ae)=>{var ve=Xa(),I=a(ve);r(I,()=>wt,(D,R)=>{R(D,{value:"all",children:(T,N)=>{_();var X=P("Semua");t(T,X)},$$slots:{default:!0}})});var E=d(I,2);r(E,()=>wt,(D,R)=>{R(D,{value:"active",children:(T,N)=>{_();var X=P("Aktif");t(T,X)},$$slots:{default:!0}})});var _e=d(E,2);r(_e,()=>wt,(D,R)=>{R(D,{value:"graduated",children:(T,N)=>{_();var X=P("Lulus");t(T,X)},$$slots:{default:!0}})});var de=d(_e,2);r(de,()=>wt,(D,R)=>{R(D,{value:"dropped",children:(T,N)=>{_();var X=P("Berhenti");t(T,X)},$$slots:{default:!0}})}),t(Q,ve)},$$slots:{default:!0}})});var j=d(ue,2),ie=Z(j);Qa(ie,{});var Ke=d(ie,2);Oe(Ke,{size:"sm",class:"h-7 gap-1",children:(xe,O)=>{var Q=Za(),ae=a(Q);sa(ae,{class:"size-3.5"}),_(2),t(xe,Q)},$$slots:{default:!0}}),W(j),W(C);var Le=d(C,2);r(Le,()=>Xr,(xe,O)=>{O(xe,{value:"all",children:(Q,ae)=>{var ve=h(),I=a(ve);r(I,()=>jr,(E,_e)=>{_e(E,{children:(de,D)=>{var R=ds(),T=a(R);r(T,()=>Ir,(re,it)=>{it(re,{children:(dt,Bt)=>{var Qe=Wa(),rt=a(Qe);r(rt,()=>Rr,(Je,at)=>{at(Je,{children:(qe,Ee)=>{_();var He=P("Data Siswa");t(qe,He)},$$slots:{default:!0}})});var ct=d(rt,2);r(ct,()=>Ar,(Je,at)=>{at(Je,{children:(qe,Ee)=>{_();var He=P("Kelola pengguna Anda dan lihat informasi mereka.");t(qe,He)},$$slots:{default:!0}})}),t(dt,Qe)},$$slots:{default:!0}})});var N=d(T,2),X=Z(N);r(X,()=>Fr,(re,it)=>{it(re,{children:(dt,Bt)=>{var Qe=h(),rt=a(Qe);r(rt,()=>Qr,(ct,Je)=>{Je(ct,{children:(at,qe)=>{var Ee=os(),He=a(Ee);r(He,()=>qr,(st,ut)=>{ut(st,{children:(vt,Ct)=>{var Xe=h(),$t=a(Xe);r($t,()=>Wt,(ot,ye)=>{ye(ot,{children:(Ze,bt)=>{var ze=Ya(),Ce=a(ze);r(Ce,()=>et,(q,Y)=>{Y(q,{class:"hidden sm:table-cell",children:(A,he)=>{_();var L=P("Photo");t(A,L)},$$slots:{default:!0}})});var Be=d(Ce,2);r(Be,()=>et,(q,Y)=>{Y(q,{class:"hidden lg:table-cell",children:(A,he)=>{_();var L=P("NISN");t(A,L)},$$slots:{default:!0}})});var We=d(Be,2);r(We,()=>et,(q,Y)=>{Y(q,{children:(A,he)=>{_();var L=P("Nama Lengkap");t(A,L)},$$slots:{default:!0}})});var De=d(We,2);r(De,()=>et,(q,Y)=>{Y(q,{class:"hidden md:table-cell",children:(A,he)=>{_();var L=P("Tempat Lahir");t(A,L)},$$slots:{default:!0}})});var Ue=d(De,2);r(Ue,()=>et,(q,Y)=>{Y(q,{class:"hidden lg:table-cell",children:(A,he)=>{_();var L=P("Tanggal Lahir");t(A,L)},$$slots:{default:!0}})});var me=d(Ue,2);r(me,()=>et,(q,Y)=>{Y(q,{class:"hidden lg:table-cell",children:(A,he)=>{_();var L=P("Jenis Kelamin");t(A,L)},$$slots:{default:!0}})});var we=d(me,2);r(we,()=>et,(q,Y)=>{Y(q,{children:(A,he)=>{_();var L=P("Actions");t(A,L)},$$slots:{default:!0}})}),t(Ze,ze)},$$slots:{default:!0}})}),t(vt,Xe)},$$slots:{default:!0}})});var kt=d(He,2);r(kt,()=>Hr,(st,ut)=>{ut(st,{children:(vt,Ct)=>{var Xe=h(),$t=a(Xe);qt($t,17,()=>l(n),mr,(ot,ye)=>{var Ze=h(),bt=a(Ze);r(bt,()=>Wt,(ze,Ce)=>{Ce(ze,{children:(Be,We)=>{var De=ss(),Ue=a(De);r(Ue,()=>tt,(L,le)=>{le(L,{class:"hidden sm:table-cell",children:(fe,Re)=>{var H=es();ee(Ye=>hr(H,"src",Ye),[()=>l(ye).expand.user_id.avatar?pe.files.getURL(l(ye).expand.user_id,l(ye).expand.user_id.avatar):"https://placehold.co/40"]),t(fe,H)},$$slots:{default:!0}})});var me=d(Ue,2);r(me,()=>tt,(L,le)=>{le(L,{class:"font-medium hidden lg:table-cell",children:(fe,Re)=>{_();var H=P();ee(()=>Ae(H,l(ye).nisn)),t(fe,H)},$$slots:{default:!0}})});var we=d(me,2);r(we,()=>tt,(L,le)=>{le(L,{children:(fe,Re)=>{_();var H=P();ee(()=>Ae(H,l(ye).expand.user_id.full_name)),t(fe,H)},$$slots:{default:!0}})});var q=d(we,2);r(q,()=>tt,(L,le)=>{le(L,{class:"hidden md:table-cell",children:(fe,Re)=>{_();var H=P();ee(()=>Ae(H,l(ye).expand.user_id.birth_place)),t(fe,H)},$$slots:{default:!0}})});var Y=d(q,2);r(Y,()=>tt,(L,le)=>{le(L,{class:"hidden lg:table-cell",children:(fe,Re)=>{_();var H=P();ee(Ye=>Ae(H,Ye),[()=>new Date(l(ye).expand.user_id.birth_date).toLocaleString("id-ID",{day:"numeric",month:"long",year:"numeric"})]),t(fe,H)},$$slots:{default:!0}})});var A=d(Y,2);r(A,()=>tt,(L,le)=>{le(L,{class:"hidden lg:table-cell",children:(fe,Re)=>{_();var H=P();ee(()=>Ae(H,l(ye).expand.user_id.gender)),t(fe,H)},$$slots:{default:!0}})});var he=d(A,2);r(he,()=>tt,(L,le)=>{le(L,{children:(fe,Re)=>{var H=h(),Ye=a(H);r(Ye,()=>Or,(Dt,Ut)=>{Ut(Dt,{children:(Pt,vs)=>{var jt=as(),It=a(jt);r(It,()=>Nr,(St,Tt)=>{Tt(St,{child:(At,lt)=>{Oe(At,Ve(()=>lt==null?void 0:lt().props,{"aria-haspopup":"true",size:"icon",variant:"ghost",children:(zt,Mt)=>{var xt=ts(),Vt=a(xt);vr(Vt,{class:"size-4"}),_(2),t(zt,xt)},$$slots:{default:!0}}))},$$slots:{child:!0}})});var fr=d(It,2);r(fr,()=>Kr,(St,Tt)=>{Tt(St,{align:"end",children:(Rt,At)=>{var lt=h(),Ft=a(lt);r(Ft,()=>Gr,(zt,Mt)=>{Mt(zt,{children:(xt,Vt)=>{var Ot=rs(),Nt=a(Ot);r(Nt,()=>Mr,(ft,_t)=>{_t(ft,{children:(mt,Gt)=>{_();var ht=P("Actions");t(mt,ht)},$$slots:{default:!0}})});var Kt=d(Nt,2);r(Kt,()=>Zt,(ft,_t)=>{_t(ft,{onclick:()=>ra(`/students/${l(ye).id}`),children:(mt,Gt)=>{_();var ht=P("Edit");t(mt,ht)},$$slots:{default:!0}})});var _r=d(Kt,2);r(_r,()=>Zt,(ft,_t)=>{_t(ft,{onclick:()=>alert("Anda tidak diperbolehkan menghapus data siswa!"),children:(mt,Gt)=>{_();var ht=P("Delete");t(mt,ht)},$$slots:{default:!0}})}),t(xt,Ot)},$$slots:{default:!0}})}),t(Rt,lt)},$$slots:{default:!0}})}),t(Pt,jt)},$$slots:{default:!0}})}),t(fe,H)},$$slots:{default:!0}})}),t(Be,De)},$$slots:{default:!0}})}),t(ot,Ze)}),t(vt,Xe)},$$slots:{default:!0}})}),t(at,Ee)},$$slots:{default:!0}})}),t(dt,Qe)},$$slots:{default:!0}})}),W(N);var Ge=d(N,2);r(Ge,()=>Vr,(re,it)=>{it(re,{children:(dt,Bt)=>{var Qe=h(),rt=a(Qe);r(rt,()=>Br,(ct,Je)=>{Je(ct,{get count(){return l(p)},get perPage(){return l(u)},get siblingCount(){return l(s)},get page(){return l(i)},set page(qe){K(i,Fe(qe))},children:(qe,Ee)=>{let He=()=>Ee==null?void 0:Ee().pages,kt=()=>Ee==null?void 0:Ee().currentPage;var st=h(),ut=a(st);r(ut,()=>Ur,(vt,Ct)=>{Ct(vt,{children:(Xe,$t)=>{var ot=is(),ye=a(ot);r(ye,()=>yt,(ze,Ce)=>{Ce(ze,{children:(Be,We)=>{var De=h(),Ue=a(De);r(Ue,()=>$a,(me,we)=>{we(me,{children:(q,Y)=>{var A=ls(),he=a(A);cr(he,{class:"size-4"}),_(2),t(q,A)},$$slots:{default:!0}})}),t(Be,De)},$$slots:{default:!0}})});var Ze=d(ye,2);qt(Ze,17,He,ze=>ze.key,(ze,Ce)=>{var Be=h(),We=a(Be);{var De=me=>{var we=h(),q=a(we);r(q,()=>yt,(Y,A)=>{A(Y,{children:(he,L)=>{var le=h(),fe=a(le);r(fe,()=>wa,(Re,H)=>{H(Re,{})}),t(he,le)},$$slots:{default:!0}})}),t(me,we)},Ue=me=>{var we=h(),q=a(we);r(q,()=>yt,(Y,A)=>{A(Y,{children:(he,L)=>{var le=h(),fe=a(le);const Re=ne(()=>kt()===l(Ce).value);r(fe,()=>ha,(H,Ye)=>{Ye(H,{get page(){return l(Ce)},get isActive(){return l(Re)},children:(Dt,Ut)=>{_();var Pt=P();ee(()=>Ae(Pt,l(Ce).value)),t(Dt,Pt)},$$slots:{default:!0}})}),t(he,le)},$$slots:{default:!0}})}),t(me,we)};Ne(We,me=>{l(Ce).type==="ellipsis"?me(De):me(Ue,!1)})}t(ze,Be)});var bt=d(Ze,2);r(bt,()=>yt,(ze,Ce)=>{Ce(ze,{children:(Be,We)=>{var De=h(),Ue=a(De);r(Ue,()=>xa,(me,we)=>{we(me,{children:(q,Y)=>{var A=ns(),he=d(a(A),2);ur(he,{class:"size-4"}),t(q,A)},$$slots:{default:!0}})}),t(Be,De)},$$slots:{default:!0}})}),t(Xe,ot)},$$slots:{default:!0}})}),t(qe,st)},$$slots:{default:!0}})}),t(dt,Qe)},$$slots:{default:!0}})}),t(de,R)},$$slots:{default:!0}})}),t(Q,ve)},$$slots:{default:!0}})}),t(g,k)},$$slots:{default:!0}})}),W(Pe),W(ke),t(f,z),oe()}export{Ws as component};
